## 20230310 星期五
- 新游戏框架修改

## 20230312 星期日
``周日加班``
- 新游戏框架修改


## 20230313 星期一
- 新游戏框架修改
  - 跑通基础流程
  - 增加了6种兵种，实现相关攻击方式
  
## 20230314 星期二
- 完成GPU渲染动画的工作流测试

## 20230315 星期三
- 提审demo一些细化，包括出生点规则、一些AI逻辑、弹幕兵、礼物兵
- 性能上的一些问题总结
目前笔者电脑显卡RTX2060，CPU i5-10400F。StarTop和StarLike当蒙皮数量达到400，帧率即下降到20；
- TODO：噩梦之刃，双技能攻击
- TODO：出生点模型替换
- TODO：看帧同步相关文章：https://zhuanlan.zhihu.com/p/556920018
- TODO：场景增加四叉树管理，用于快速搜寻目标，不用逐个遍历


## 20230316 星期四
- TODO：炙刃战车喷火效果

## 20230317 星期五
- 增加技能系统，技能驱动子弹，子弹驱动buff
- 通过技能系统实现多种攻击类型

## 20230319 星期日
``周日加班``

- 增加6种兵种

## 20230320 星期一
- 增加6种兵种的子弹、死亡、击中等特效
- 增加碰撞，使用Navmesh的Obstacle Avoidance
- 增加激光类型子弹，并按照特定规则集成
- 弹幕兵通过配表来配置快捷键之类的
- 子弹目标S了，则自动干掉子弹，避免出现太多空枪
- TODO：A* Pathfinding相关教程：https://zhuanlan.zhihu.com/p/73145849
- TODO：https://halitanildonmez.wordpress.com/2018/01/11/using-a-path-finding-project-with-rvo2-library/

## 20230321 星期二
- demo优化完善
- 帧同步相关知识了解，寻路、碰撞，RVO
- TODO：http://www.jikedoc.com/article/4642614.html
- TODO：https://www.cxyzjd.com/article/KubilityDef/79483414

## 20230322 星期三
- demo提审前最后一些调整修改：新的角色入场提示界面，相机镜头调整
- TODO： [Sourcetree使用ssh后出现 The server's host key is not cached in the registry](https://www.cnblogs.com/ring1992/p/16589304.html)
- TODO：[Windows 平台 SourceTree 拉取仓库 反复崩溃](https://www.cnblogs.com/lesten/p/16202268.html)


## 20230323 星期四
``今天强哥、飒哥、静姐、飒嫂他们去北京出差``
- 移植GPU渲染蒙皮动画到异星项目
- 异星游戏内大量AddComponent造成很多GC，优化NavAgent和AnimAgent为非MonoBehavior的形式，降低GC。
- 确定新款demo改成回合制出兵，类似Game Science的产品《Red Tides》
- 开会讨论新项目网络版的寻路、avo进度以及否需要请外援
- 新款回合制demo 10%
- 解决GPU渲染框架一个bug，预制件放在场景中可以运行，但是拖拽到场景中的预制件看不到渲染内容。
原因是放在场景中的预制件名字和GPU Texture名字一致。拖拽到场景中的预制件名字后面自动加了(Clone)字符，导致有些资源加载不到。

- TODO：调研dots版本A*寻路
- TODO：学习A* Pathfinding Pro

## 20230324 星期五
- 讨论以一个客户端作为服务器，通过弹幕服务器转发指令和角色状态到另一个客户端的网络方案。因为角色量巨大，导致单点服务器网络带宽承受不了。遂作罢。
- 新款回合制demo 50%(核心功能实现)
- TODO：dots版本的A* ：https://github.com/jeffvella/UnityAStarNavigation
- TODO：一个demo 游戏的navmesh 与rvo动态避障算法（1）:https://blog.csdn.net/KubilityDef/article/details/79483414

## 20230326 星期日
``今天加班``
- 增加回合制表，配置每个回合的时间

## 20230327 星期一
- demo UI集成
- TODO：想办法把之前用了Find GetComponent这些API的地方改过来
- TODO：blog,背景跟随文字大小缩放，支持九宫
- TODO：异星的结算界面移植到新游戏
- TODO：增加demo的回合开始时出兵的提示功能


## 20230328 星期二
- DEMO优化
- 调通Animation Instancing支持武器的流程

## 20230329 星期三
- DEMO优化
- TODO：子弹拖尾延迟消失的需求

## 20230330 星期四
- 处理异星所有的角色，改成支持GPU渲染
- TODO：异星卡死问题
- TODO：异星打包工具，产品名设置问题
- TODO：对比大闹天宫录屏，技术验证
- TODO：做个一键上传本地客户端自动生成的日志的工具
- TODO：异星客户端逻辑更改，支持传统模式动画和gpu动画混合两种方式
- 出异星1.0.7.1版本包，解决1.0.7出现的主播客户端无响应的问题
- TODO：改了GPU后，结算的两个3D预制件节点有材质球丢失情况
- 解决异星虫族打破门、指挥官等非玩家召唤出来的单位无分数的问题
- TODO：注意测轰炸机不出来的问题
- 看dotsnav开源项目



## 20230331 星期五
- TODO：Power_Rocketeer_gpu原始模型需要调整才能支持双附件节点
- 调整异星的项目资源，以支持gpu渲染。

## 20230401 星期六
- ``周日我有事，因此今天加班，其他同事明天加班``
- 主要解决昨天的包积分不平衡的问题。
主要原因是昨天的包上错了，同时调整了伤害和胜利的系数

## 20230403 星期一
- 异星更新包1.0.8：点赞爆兵、新场景、平衡性调整等。整到4号凌晨2点才稳定下来。

## 20230404 星期二
- 出配合官方走直播伴侣的包，并微调数值和bug处理，版本号：v1.0.9
- 开会讨论新游戏：未来战场 美术风格需要改成偏卡通风格
- TODO：异星集成四叉树
- TODO：异星下个更新版本开发优先级
集成GPU渲染蒙皮动画
送礼，换阵营
场景加宽后的客户端调整
门破后人族白机甲可以出城的AI逻辑

## 20230405 星期三
- 今天清明节，为了周末能够双休，故今日过来上班
- 这个博客分享的一些代码很不错，有kdtree
https://gist.github.com/ditzel


## 20230406 星期四
- 卡通渲染方案研究
- TODO：考虑后续服务器拆分，抖音指令那边单独一个服务器；然后游戏逻辑至少2个服务器，一个用来测试一个用来线上跑
- TODO：考虑后续服务器停服时，记录当前正在开播直播间玩家已经送的礼物和分数。重启后为玩家加上分数和补上对应的礼物，这些礼物玩家可以通过特定指令来触发。


## 20230407 星期五
- kdtree研究，测试性能
- 异星新场景碰撞、路网设置
- TODO：C#下的窗体管理还是要做：完善相关工具链
- TODO：C#下的Resources目录下的预制件同步、异步加载


## 20230410 星期一
- 异星新场景调整，bug修复，出包等
- 项目调研：竞品远古战场
使用了RTS Toolkit Free插件
使用GPU Instancer插件来做蒙皮动画
Job来优化范围寻敌和最近敌人
重点关注：GameController3c.cs

- TODO：详细调研RTS Toolkit Free


## 20230411 星期二
- TODO：帧同步对战模式实现，还需要学习的流程
  - 学习jobs
  - 封装A*地图编辑器、高效算法实现
  - dots封装A*
  - RVO避障
  - 帧同步框架

- TODO：把StarLike寻路改成A* Pathfinding Pro.

## 20230412 星期三
- StarLike寻路换成A* Pathfinding Pro.


## 20230413 星期四
- TODO：研究立州发的BB哥之前做的星际之巅的客户端工程
- 研究A* Pathfinding Pro.实现分层，实现不同类actor穿越。
- TODO：研究Hybrid热更
- TODO：后续把U上传日志的功能去掉了，统一用工具上传

## 20230414 星期五
- A* Pathfinding Pro.寻路dots版，20%
- （已处理）新项目的新UI集成
- TODO：一个很好的ECS视频教程：https://www.youtube.com/watch?v=IO6_6Y_YUdE , ECS 教程：https://forum.unity.com/threads/new-version-of-entities-1-0-pre-release-now-available-february-2023.1400887/ ，ECS官方文档：https://docs.unity3d.com/Packages/com.unity.entities@1.0/manual/index.html

## 20230417 星期一
- 新UI集成

## 20230418 星期二
- 把U上传日志改成上传自带的日志，命名为：用户的设备名+日期
- TODO：处理好rvo mask
- DragonBoat框架调整：UI框架支持


## 20230419 星期三
- UI框架支持，整体完成50%，后续还要实现Area
- 野游框架，查看弹幕获取方式

## 20230420 星期四
- 新模型调整：增加碰撞、发射口、空中单位调整位置

## 20230421 星期五
- TODO：新UI

## 20230423 星期日
- Q版角色集成，贴图自动切换、逻辑调试

## 20230424 星期一
- Q版选择兵种界面，使用框架
- 排行榜界面调试

## 20230425 星期二
- TODO：排行榜名字还是提供显示全名，通过缩放的方式
- 测试全近战，很多单位的表现效果，是否和萌宠宠类似

## 20230521 星期日
``周日加班``
- 复审调整
  - 一些界面显示效果集成
  
  
## 20230522 星期一
- 新角色集成

## 20230523 星期二
- 新角色集成，大部分代码都是直接从峰瑜那边拿过来使用的。后面考虑整体再重构一下这部分的功能

## 20230529 星期一
- 礼物兵特效层级问题
- （已处理）TODO：RVO ignore设置

## 20230530 星期二
- 仙女棒增加能量上限；引入回合能量上限机制
- （已处理）TODO：爆兵时UI提示多次闪烁；检查仙女棒上限加对没有
- （已处理）TODO：额外能量上限显示bug
- 胜场提示，电池图标
- 礼物特效展示再调整
总结下，目前我们系列游戏礼物特效展示有三种方式。
  - 法1，在战斗界面中挂个全屏RawImage，用来承载rt（该rt在工程中手动建立）；通过在礼物特效中设置相机渲染层级为gift，模式为Solid Color(颜色设置为黑色)，并把内容渲染到rt上。这种方式弊端是有些效果渲染到rt上后会丢失细节。
  - 法二，使用之前框架代码自动生成rt和销毁。但是之前在异星中遇到过概率很小的黑屏问题。具体原因还未定位到。
  - 法三，礼物特效中设置相机的渲染层级为gift，模式为Depth Only，设置Depth为10。同时UI渲染模式使用``Screen Space-Camera``,并设置UI相机的渲染层级为8。这样即可确保礼物特效显示在最上层，不会被UI遮挡。

  最终StarLike项目选择了第三种方式。
  
## 20230531 星期三
- 击杀数提示和击杀boss提示
  
## 20230601 星期四
- TODO：考虑后续把子弹表中是否有射击特效，是否有击中爆炸特效等字段移到Skill表
- 核弹技能逻辑调整
- 击杀数文字滚动效果、缩放效果
- TODO：战斗血条单独放到一个Area中处理
- （已处理）TODO：风暴战甲卡牌无图
- （已处理）TODO：查询和Z快捷键弹出卡片信息封装
- （已处理）TODO：buxingtanke_bullet未添加bodyCollider


## 20230602 星期五
- 今天又遇到一个导表奇葩bug，最后一行最后一列的内容导出后丢失了几个字符。。。无奈就只能再加一行废数据。


## 20230604 星期日
``周日加班``
- 登录流程调整，协议更新
- TODO：proto的service要自动init，不用手动添加
- TODO：proto的消息号也要自动注册
- （已处理）TODO：角色RVO权重

## 20230605 星期一
- （已处理,先不取消）TODO：人数限制是否取消
- （已处理，目前无爆炸效果）TODO：基地爆炸效果
- （已处理）TODO：查询命令报错
- （已处理）TODO：地图需要扩大，避免一次太多兵溢出地图
- （已处理）TODO：是否需要设置回合上限，目前是200回合
- （已处理）TODO：大量组刷的时候看下分帧加载是否正常
- （已处理）TODO：基地站位的render要设置不可见
- TODO：AStarTool.cs中TryGetRandomPointInAStarGraph()还未实现
- TODO：造兵延迟，未考虑到海量兵导致进入下一局的情况
- （已处理）TODO：增加竖直视角快捷键
- （已处理）TODO：http请求时增加转圈mask

## 20230606 星期二
- （已处理）TODO：送礼自动加入
- （已处理）TODO：正式服加入机制 J/j/加/加入/连点>5次/送礼自动 逐个分配蓝橙双方
- （已处理）bug巡洋舰子弹有问题
  - 1，导弹打中目标不爆照，只有击中地面才爆炸；且多发导弹效果未触发
  - 2，激光技能未触发  
- TODO：回合制爆兵，分帧造兵
- （已处理）TODO：世界榜的item把位置坐标Z置为0
- （已处理）TODO：结算世界版感觉发的数据有问题
- （已处理）TODO：断线重连后，ping没有返回的问题！！(客户端消息handler的问题导致的)

## 20230607 星期三
- TODO：怪太多场景溢出掉落的问题
- 魅影（本来就没用到）、风暴战甲子弹再测下
- TODO：考虑改成GPU渲染
- TODO：调研动物派对游戏技术实现上的问题
- （已处理）TODO：登录界面公司logo，名字等
- （已处理）TODO：全是机器人，结算界面那3个角色信息未能隐藏
- TODO：bug,结算后新一局又弹出了击杀提示
- （已处理）TODO：仙女棒提示改一下，增加能量上限
- （已处理）TODO：玩家昵称去掉，改成头像


## 20230608 星期四
- 一些优化
TODO：点赞加能量值，5个赞左右加1点能量。
TODO：魔盒里面的兵种介绍、玩法说明还没有
- 兵种暴走模式
当兵种总数达到一定量，所有单位的攻击力翻倍。
- TODO：包体管理接入
- TODO：批量招兵 ，如：b1 100

- TODO：考虑增加用户查询自己兵情况的（只看得到当前局召）
- TODO：暴走模式下礼物兵也更容易挂，如何处理。
- TODO：基地和礼物兵不受狂暴攻击力的影响，只受初始攻击力影响。
- TODO：仙女棒加上限的同时加1点能量
- （已处理）当前局连胜显示错误
- 配置个666指令，平衡一下用户点赞数用完的情况。


## 20230609 星期五
- TODO：登录失败增加一些tip
- 软体角色技术调研
[Ragdoll Animator](https://assetstore.unity.com/packages/tools/physics/ragdoll-animator-209616)

[Hairibar.Ragdoll](https://www.youtube.com/watch?v=ByNPbbACf40)

## 20230611 星期日
``周日加班``
基于Hairibar.Ragdoll调通了可控Ragdoll


## 20230613 星期二
- TODO：研究下GPU Instancer，看下在我们游戏中使用的话对性能的提升效果如何



## 20230620 星期二
- 新的去掉轮子，规避坦克造型的角色集成

## 20230621 星期三
- （已处理，家园警戒使用的是websocket已处理）TODO:突然发现我这边ClientSocket还是老异星的消息结构。需要再和文哥测试一下



## 20230625 星期日
``端午放假调休``
- TODO:基地不受攻击加成影响
- (已处理)TODO:把龙之战的service调整移过来

- 日志上传地址改为：  http://log.qiyoogame.com/Gm/save-file/auto

注：文件查看地址为http://log.qiyoogame.com/Gm/log/auto/
- TODO:统一封装送礼特别是组刷相关接口
- TODO：引入热更

设置-隐私（位置、相机、麦克风）-应用权限-麦克风-允许应用访问你的麦克风



## 20230704 星期二
- 底层框架调整以支持代码资源热更新
- TODO，框架调整涉及到的资源名大小写的一些调整 congci_F73 立绘图标名、资源名
- TODO：换了字体，导致部分界面Text元素不显示。需要逐一调整
- TODO：目前已经不要求场景有一个Root节点了。故打场景，搜集依赖的代码也需要重新调整



## 20230706 星期四
- 一些备注
特效也是用otherprefab类型来打ab，是因为子弹目前放在了Effect目录下，但是子弹又属于actor，是按照op类型加载的；若子弹按照effect类型打ab，则加载子弹就会出错。
因此预制件只有两种ab类型：window和otherprefab
- TODO:ab加载预制件的reuse感觉没必要。自己维护对象池
- TODO：ServiceFetch的OnBeforeSceneLoadRuntimeMethod在热更方案中未自动调用，需要调整。
[RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]修饰的都需要调整

## 20230707 星期五
- （NormalBullet会重复添加导致的，已hack处理）巡洋舰子弹在新开局的时候会出现诡异现象
- （已测试，无问题）测试新的通过属性的流程获得Service是否有问题
- TODO：核弹爆炸的shader有一部分未收集到变体中。需要重新收集变体，同时这个地方的要运行后，手动处理一下
- TODO：GameScene不是完整天空盒
- （已处理）TODO：第二局后，有些角色的攻击目标是自己阵营的了。这部分有点问题。看了一下和子弹一样，重复加了组件


- 代哥提供的一个ts支持帧同步的完整服务器开源框架
https://gitee.com/fengssy/ts-gameframework

## 20230710 星期一
- 角色创建改成泛型方式，不需要创建太多的角色工厂
- TODO：针对HybridCLR提供一键打包，整理热更代码和资源


## 20230711 星期二
- TODO：HybridCLRConfig处理
- （已处理，把一键上传本地日志独立出去了）TODO：DebugExt想办法移植到Infrostracture中。或者最少把一键上传本地日志的移过去

- 部分ZGame代码封装成DLL


## 20230712 星期三
- TODO：一键打PC包工具
- TODO：技能系统增加一些参数改成和龙之战一致


## 20230713 星期四
- 一些优化
- TODO：火攻也要支持一次性伤害
- TODO：AOE伤害支持其他形状

## 20230714 星期五
- （已处理）TODO：版本号显示增加上原始资源版本号的显示
- （已处理）TODO：蜘蛛炮两个射口不对称。调一下
- （已处理）TODO：影响很大的bug:大量召唤同一个单位时，部分角色的aStarAgent会丢失。



## 20230716 星期日
- ``周日加班``，虾哥、佳林和我


## 20230717 星期一
- 家园警戒优化
- （已处理，增加配表参数）TODO：升星后的模型适当调大
- （已处理，并不是shader的问题，实际问题是后处理在打包后未生效。目前通过在GameEntry界面主动加入了对后面可能用到的后处理的直接引用，已经hack解决。）TODO：打包后核弹shader还有问题，要处理一下
- （已处理）TODO：升星UI提示

## 20230718 星期二
- 升星UI提示和相关逻辑
- 666弹幕增加电池能量0.5个点

## 20230719 星期三
- 升星规则调整
- 一些bug修复
- 回合出兵增加时间间隔，避免瞬间卡顿
- （已处理）TODO：压测了一下，描边挺消耗性能的。看来还是需要换个方案
- Unity商店RTSToolkit demo能支持差不多3K单位寻路战斗。使用了KDTree


## 20230720 星期四
- （已处理）TODO，bug：核弹配置的是只对地，但是对巡洋舰确有伤害，对战神没有伤害。
- （已处理）TODO，bug：遇到启动后分辨率显示错误的问题

- 打包注意事项
0，设置好版本号
1，把ResEx拷贝到StreamingAssets目录
2，检查是否有gpu texture需要更新，从美术工程拷贝过来
3，打热更dll,并拷贝到ResEx目录。打全量包时，热更dll别忘了从ResEx拷贝到StreamingAssets目录下

- （已处理）TODO：泰坦蓝色两种星级颜色一样了。 不过礼物兵不需要。。。！！！
## 20230721 星期五
- bug修复，优化

## 20230722 星期六
``周6加班``。连上7天了。
- 前三入场特效处理

## 20230724 星期一
- 优化

## 20230725 星期二
- 云启动接入

## 20230726 星期三
- 音效集成
- （已处理）TODO：龙之岛项目buff不生效问题
- 云启动，触摸操作
- 游戏默认下载安装目录，这里记录一下
C:\Users\ZhouHui\AppData\Roaming\webcast_mate\miniGame\UnityDownload
C:\Users\ZhouHui\AppData\Roaming\webcast_mate\miniGame\UnityInstall
- TODO：
1，橙，666这两个指令 需要加入抖音后台
2，+- 空格都支持
3，小玩法内容更新

## 20230727 星期四
- 出兵改成间隔持续出的那种试试呢。
- （已处理，实为之前UI自适应导致的）BUG:改分辨率后启动后导致的UI显示问题
- 4-30的入场特效


## 20230728 星期五
TODO：
- （已处理）玩家信息增加电池上限信息
- 增加仙女棒组刷功能
- （已处理）设置界面

## 20230731 星期一
- 云启动涉及到Mobile部分，触屏操控的实现

## 20230803 星期四
最近几天完成一些优化，并出包1.0.2，包括：
- 出场特效分级调整
- 基地距离扩大，镜头调整，增加键盘操作移动
- 基地震荡波技能

新增加b+数字的方式自动加入游戏

- TODO：明天比对一下美术和项目工程的ZGame，整理一下，把最终版本移到Garfield项目