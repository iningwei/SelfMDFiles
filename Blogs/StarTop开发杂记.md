## 20230104-20130106 星期三-星期五
确定做一个非对称战斗的dy互动游戏，因此开始进行技术调研、美术准备、熟悉dy相关文档。
计划的是年前上dy。满打满算也就十天出头。
## 20230109 星期一
- 基础框架开发：Actor+行为树

## 20230110 星期二
- 引入配置表ActorData、BulletData，确定表的框架结构
- 框架持续开发

## 20230111 星期三
- 熟悉dy互动玩法规则和开发流程
- 由于dy 16号停止审核，故我们两周的开发时间又被压缩到15号
- 确定15号提审版本大致内容
- 和强哥确定借助外援来进行中转服务器的开发，最终确定外援：lyx

## 20230112 星期四
- 定proto协议
登录、弹幕数据推送
- 定协议格式
消息长度2字节：消息号2字节：消息体。
其中消息长度为消息号长度+消息体长度
- door动态生成
- actorData(配置表)集成进actor
- 一个完整的虫子寻路实现并攻击关联door
- actor附加UI
- player附加UI
- 从Player派生子类MonsterPlayer、HumanPlayer实现不同的出兵逻辑

## 20230113 星期五
- RSA加密解密，Java侧公钥转换为CSharp侧
- 客户端通讯框架调整
- 协议联调
- 将军逻辑（70%）
- 整体加载流程：登录、战斗、结算、重新开始（80%）

## 20230114 星期六
- 人类生产基础战斗单位
- 人类基础战斗单位AI逻辑
- 和强哥飒哥确定距离版本还差的内容
- 和葫芦的 second aniversary,下午5点多点提前走

## 20230116 星期一
- 实现子弹：单点、跟踪
- 基础怪物的AI逻辑（100%）
- 指挥官AI逻辑（80%）：差射击动作和子弹匹配

## 20230117-20230119 星期二-星期四
- 实现更多的角色逻辑、子弹逻辑
- 子弹AOE伤害
- 子弹抛物线轨迹
- 子弹追踪
- 平面内找任意点（TODO:Blog）
- 19号中午去华阳街道买了王妈手撕兔和兔头，准备过年带回去，2022年虽然有点惨，但是回家该有的理解还是要有的。

## 20230128 星期六
``春节后上班第一天，琥羽未上班，我们团队来了立州、佳林和我，中午立州请的KFC``
- 集成进去所有的虫类
- 重写DebugWindow界面，改成通过：角色ID@命令 的方式进行处理，降低界面复杂度
- 增加EffectData表和EffectManager来统一控制特效的播放
- 集成新的子弹
- (已处理)：分表到不同的xlsx文件中
- 增加子弹发射特效
- (已处理)：光武那边头像下载集成

## 20230129 星期日
``春节上班第二天，琥羽也上班了。我们团队来了燕姐和我，元宇宙的刘亚雄也来了``
- 重构部分模块，子弹模块精简
- 独立出buff系统，子弹运行轨迹通过buff系统驱动；子弹伤害也通过buff驱动
- 近战攻击通过空子弹来实现：发射一颗不可见的追踪子弹
- TODO：独立出技能系统，后续战斗这块整体架构即： AI+技能+buff+子弹

## 20230130 星期一
- 增加buffdata表
- 增加死亡动作表演
- 解决基础枪手射击时身体剧烈抖动问题（剧烈抖动是由于射击过程中穿插进入了Walk动画导致的。另外由于基础枪手在高位，射击低位目标转身插值导致了旋转造成小幅抖动，目前这个问题还没有处理）
- 开会讨论项目提审时间节点为本周五


## 20230131 星期二
``今天是正月初十，阴历生日，满35周岁了。一事无成！``
- 实现火甲虫持续伤害
- (已处理)：解决角色死亡后依旧移动的问题
- (已处理)：角色死亡后，播放死亡动作期间，不再显示血条
- (已处理)：buff特效
- Star Top配表规则
所有表的ID从非0开始，0标示缺失。比如B表引用A表中ID为0的东西，表示缺失。BeanManager中对ID为0的直接返回null。项目中使用数据时要注意判断null。
- 人类点赞给门加血
目前通过创建一个中立单位，发射子弹加血，加血量和该中立单位的攻击力绑定。这部分需要改，后续统一为技能驱动。
- (已处理)：礼物效果
- TODO：https://github.com/justonia  整理下其其它资源。其PhysicsExtention正在使用

## 20230201 星期三
- 增加ActorGetBuilding行为，使得可以攻击不在导航区域中的人类建筑
- 集成人族最后两个兵种
- 常量数值通过配置表ConfigData配置


## 20230202 星期四
- 相机调整
- 出生点模型显示、虫族出生点刷新进度表现
- 战斗结束特效集成
- 战斗UI血条等大小和相机距离建立关系
- TODO：总结一下使用NavmeshAgent不使用ObstacleAvoidance如何避免出现拥挤。以及解决Carve导致的诡异现象
https://blog.csdn.net/qq_37724011/article/details/115184131
https://github.com/llamacademy/ai-series-part-33  这个人的git很多好东西
- (已处理)：解决门被打破后，部分寻路虫子会滑步的问题

## 20230203 星期五
- in,out,ref
- 调整AI逻辑
- 增加hudVisibleLevel字段，控制hud显示级别
- 各种bug修改

## 20230206 星期一
- GM指令开发
- 人类两种可移动单位AI逻辑调整
- 整体寻路性能优化
- 去掉fog,提高清晰度，同时提高效率
- (已处理)：hud文字最多显示7个字符+...的方式

## 20230207 星期二
- 配置表增加两个阵营人数变量
- 新场景合并处理、nav烘焙
- 资源整理，不用的从Resources目录移除到其它目录
- 城外虫族对门和防御塔攻击的AI策略调整
- 解决刷礼物，模型展示层级问题

## 20230208 星期三
- 处理连续刷礼物，tip信息间隔展示问题
- TODO:使用GPU加速动画
- 连续礼物效果表现
- AI调整
- 玩家加入、actor生产瞬间的UI闪烁问题
- 导表工具调整：xlsx文件编辑时不影响导表
- (已处理)：Actor内存池
- (已处理)：特效也要使用内存池
- (已处理)：bug一个门被打破后，其它虫子不再打当前门，去被打破的门
- (已暂时通过延迟设置Active为True的方式解决)：使用对象池，导致电浆虫子弹初始点和射出点不一致，出现瞬间长拖尾问题。
- (已处理)：测试Actor内存池，重开战斗出现的组件未销毁完毕的问题

## 20230209 星期四
- TODO：jiguangqiang_bullet缓存个数过多，感觉有问题
- (已处理)：门开始播放死亡特效时，即移除其Carve
- (无需处理，就是需要这个顺序):ActorManager L150 RecycleActorObj和GameObjectDestroy(actor)顺序问题可能是导致组件未销毁完毕的原因，后面有时间处理一下。
- (已处理):RT实现方式回退之前版本，目前只改了毁灭机甲的prefab
调整好还要通测一下，特别是编辑器下偶尔黑屏的问题

## 20230211 星期五
- 增加换路功能
- 飞行单位实现思路调研

## 20230213 星期一
- 晚上开启内测，暴露了很多问题，比如虫族1抖币刷999个则会瞬间产生将近5000个单位，造成卡死。而且还要播放999个提示信息。
- (已处理，已统一加密)：机器人头像加密

## 20230214 星期二
- 开始新一轮优化
- 增加飞行兵，相关导航调整
- (已处理)：配置两种分辨率，用户可以调整
- (已处理)：明天和张峰瑜的场景合并一下

## 20230215 星期三
- 增加2种新的飞行单位
- 弹幕礼物改成分帧处理，同时部分弹幕礼物把根据数量给拆分为多个弹幕，降低同时召唤单位的压力
- (已处理)：把爆兵指令和之前的召唤指令整合一下
- (已处理)：长时间无互动玩家，标记踢出，后续在有空位的情况下可以回到战场。

## 20230216 星期四
- (已处理)：主播直播时遇到电浆虫在大门附近有炮塔的情况下依旧打大门
- (已处理)：主播直播时遇到虫子去打别的大门前的炮塔
- (已处理，玩家离线送礼的话会强制回到座位，且不受人数限制)：由于加入了掉线机制，那么在玩家离线最好弹出一个快速提示。同时该玩家送礼的话，会弹出已离线提示
- TODO：主播直播道具和礼物对应表单，是否程序这边提供，通过一个快捷方式弹出和隐藏
- (已处理)：玩家换路成功增加快速提示
- 增加大屁股虫贝塞尔曲线弹道


## 20230217 星期五
- 集成大屁股虫：子弹、特效、路线、行为树
- TODO:QuickTip参考森林马拉松会有多个分不同高度弹出，避免一个出现拥堵
- TODO：看下二次贝塞尔曲线ratio大于1时会有什么影响，没影响的话需要更新BezierTool.InterpVector3的实现
- (已处理)：ActorData的 canBeAttack 参数查一下
- (已处理)：人类飞行单位出生位置设置代码再检查一下
- (已处理)：挨个检查子弹是否加了Behavior Tree Owner: bullet
- (已处理)：每局结算，上行分数要不要上行该角色阵营信息。方便后续按照阵营筛选排名信息

## 20230219 星期日
``周日加班``
- (已处理)：SummonData表的dy指令名称需要调整
- (已处理)：大机甲改成城门口出生，相关攻击优先级逻辑调整
- (已处理)：大机甲和屎壳郎的出场动画和自身分开
- (已处理)：出生范围加大，速度offset，避免拥堵
- TODO：虫王的UI
- (已处理)：世界排名
- (已处理)：xxx加入战场的提示


## 20230220 星期一
- (已处理)：虫族大屁股虫不对人族指挥官产生伤害
- (已处理)：人族到城外的单位不来回移动
- (已处理)：集成新的场景
- (已处理)：相机增加人类视角
- (已处理)：人类大机甲优先攻击血量最多的角色
- (已处理)：GiftPreview有问题，送仙女棒，不消失等
- (已处理，默认该方案)：大屁股虫的aoe伤害还是会对人族指挥官造成伤害

## 20230221 星期二
- (已处理)：把部分UI接受raycast取消，避免和相机操作冲突
- 实现战斗时排行榜和排行榜点击定位
- 实现实时查询弹幕

## 20230222 星期三
- TODO：寻路dots化
- 指挥官名字显示为上局第一名名字
- TODO：电浆虫在城门没破的情况下会先打城内的actor

## 20230223 星期四
- 大屁股虫子弹NaN问题处理
- 资源压缩，最大图片只支持到1024

## 20230224 星期五
- Navmeshquery jobsystem研究
- TODO:对称版本demo实现


## 20230227 星期一
- TODO：OnPlayerDispatchTroopsTimeAdd会出现player为null的情况，很奇怪。需要查一下
- ECS、DOTS学习:https://auniquepig.com/2021/06/21/DotsSwords/

- 出新包要注意的地方：1，Config表关闭debug、关闭shortcut 2，移除DebugReporter.txt 3，cfg关闭日志trace和打印 4，检查备份代码可否被删除


## 20230228 星期二
- TODO：部分玩家直播间世界排行榜没弹出
- (已处理,是抖音那边过滤了)：有玩家输入虫加入不了，玩家在各个直播间都无法加入
- TODO：玩家头像有概率获取失败
- (已处理)：登录时带上设备码
- (已处理)：客户端带上版本号信息，服务器控制可播版本号范围

## 20230301 星期三
- TODO：服务器踢人后加个标识
- 版本升级到1.0.1
- 场景navmesh烘焙更新
- 虫族各路只管攻击自己的门，不管其它家的
- B1-B4也要支持模糊
- (已处理)：要不要支持自定义查询

## 20230302 星期四
- (已处理)：添加查询指令
- 玩家自定义配置分辨率错误
- 屎壳郎AI改成攻击范围内找血量最多的
- 版本升级到1.0.2
- TODO：结算协议增加胜负方信息，结算面板显示全服两个阵营胜率情况，每个人的两个阵营胜率情况

## 20230303 星期五
- TODO：换路后给门加血index错误
- 主播反馈：火甲虫不打大机甲的bug
- TODO：由于一周排行榜数据一更新，因此是否考虑排行榜界面增加一个上周最终排名信息
- TODO:大屁股虫可以打帝国飞舰
- 轰炸机子弹数从7减到5
- 帝国飞舰血量从6600增加到8000

  
## 20230304 星期六
- 版本升级到1.0.3，更新内容
  - 1，排行榜界面改成周排行（抖音要求的）
  - 2，大屁股虫可以攻击飞行单位，比如帝国飞舰
  - 3，轰炸机子弹数减少
  - 4，帝国飞舰血量微调高
  - 5，增加了版本号控制
  - 6，尝试修复世界榜不出来的问题，需要进一步验证
  
## 20230306 星期一
- 一些bug修复、优化调整，为新版本上线准备
  
## 20230307 星期二
- 版本升级到1.0.4 (脑虫归来)
  - 1.取消设备码限制，只需要直播间号码就可登陆
  - 2.异虫领主-脑虫正式上线，脑虫血量每掉30%会吐出伤害极大的毒雾，对较大范围所有人族单元造成伤害，请一定要注意！！！脑虫死亡，虫族也会失败。
  - 3.轰炸机，再次进行了小幅削弱，会让一小部分异虫活下来
  - 4.巨型电浆虫和轰炸机改成9.9的能量电池礼物
  - 5.机器人为玩家增加的分数减少到只加10分之一
  - 6.调整虫和人的积分数值，使其平衡。
  - 7.巨型电浆炮的攻击逻辑优化
  - 8.甲壳虫/蝎虫/死亡之钉攻击逻辑优化
  - 9.取消设备码限制
  - 10.人类机甲和飞机的攻击优先级优化
  - 11.上一局人族第一成为下一局人族指挥官，虫族第一成为虫族脑虫
  - 12.更新了登陆界面
  - 13.修复BUG：人族玩家换路后，回血回的还是原来的门

## 20230308 星期三
- 调整人族大机甲和飞行战舰在锁定脑虫后的目标切换优先级：火甲虫>蝎虫>死亡之叮>勇士>其它弹幕兵种
- 版本升级到1.0.5
  - 1.脑虫技能大幅削弱，现在只会杀死弹幕兵
  - 2.巨型电浆虫和轰炸机恢复为5.2的礼物-甜甜圈，轰炸机伤害恢复
  - 3.人类机甲和飞机的攻击优先级优化：在攻击脑虫时，若虫族有其它单位，则优先攻击这些目标，无攻击目标再攻击脑虫
  - 4.人类兵的警戒范围加大，不会再出现站在中场的情况
  - 5.巨型电浆炮的攻击逻辑优化
  
  
  
## 20230309 星期四
- 新款游戏资源整理、场景配置
- 解决掉排行榜的问题：消息头长度字段使用short导致长度不够
  

## 20230310 星期五
- 排除出会出现战斗时socket断联的情况，考虑加入心跳和重连机制

## 20230312 星期日
``周日加班``
- TOOD:结算加入玩家输赢、胜利方信息
- TODO：送置顶礼，自动加入人数少的一方

## 20230314 星期二
## 一些AI逻辑修改